{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _xdate = _interopRequireDefault(require(\"xdate\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _style = _interopRequireDefault(require(\"./style\"));\n\nvar _asCalendarConsumer = _interopRequireDefault(require(\"./asCalendarConsumer\"));\n\nvar _jsxFileName = \"/Users/isaacweber/code/SofamApp/node_modules/react-native-calendars/src/expandableCalendar/agendaList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar commons = require('./commons');\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\n\nvar AgendaList = function (_Component) {\n  (0, _inherits2.default)(AgendaList, _Component);\n\n  var _super = _createSuper(AgendaList);\n\n  function AgendaList(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, AgendaList);\n    _this = _super.call(this, props);\n\n    _this.onViewableItemsChanged = function (_ref) {\n      var viewableItems = _ref.viewableItems;\n\n      if (viewableItems && !_this.sectionScroll) {\n        var topSection = _lodash.default.get(viewableItems[0], 'section.title');\n\n        if (topSection && topSection !== _this._topSection) {\n          _this._topSection = topSection;\n\n          if (_this.didScroll) {\n            _lodash.default.invoke(_this.props.context, 'setDate', _this._topSection, UPDATE_SOURCES.LIST_DRAG);\n          }\n        }\n      }\n    };\n\n    _this.onScroll = function (event) {\n      if (!_this.didScroll) {\n        _this.didScroll = true;\n      }\n\n      _lodash.default.invoke(_this.props, 'onScroll', event);\n    };\n\n    _this.onMomentumScrollBegin = function (event) {\n      _lodash.default.invoke(_this.props.context, 'setDisabled', true);\n\n      _lodash.default.invoke(_this.props, 'onMomentumScrollBegin', event);\n    };\n\n    _this.onMomentumScrollEnd = function (event) {\n      _this.sectionScroll = false;\n\n      _lodash.default.invoke(_this.props.context, 'setDisabled', false);\n\n      _lodash.default.invoke(_this.props, 'onMomentumScrollEnd', event);\n    };\n\n    _this.onHeaderLayout = function (_ref2) {\n      var nativeEvent = _ref2.nativeEvent;\n      _this.sectionHeight = nativeEvent.layout.height;\n    };\n\n    _this.renderSectionHeader = function (_ref3) {\n      var title = _ref3.section.title;\n      var sectionTitle = title;\n\n      if (_this.props.dayFormat) {\n        var date;\n        var today;\n\n        if (_this.props.useMoment) {\n          date = (0, _moment.default)(title).format(_this.props.dayFormat);\n          today = (0, _moment.default)().format(_this.props.dayFormat);\n        } else {\n          date = (0, _xdate.default)(title).toString(_this.props.dayFormat);\n          today = (0, _xdate.default)().toString(_this.props.dayFormat);\n        }\n\n        var todayString = _xdate.default.locales[_xdate.default.defaultLocale].today || commons.todayString;\n        sectionTitle = date === today ? todayString + \", \" + date : date;\n      }\n\n      return _react.default.createElement(_reactNative.Text, {\n        allowFontScaling: false,\n        style: [_this.style.sectionText, _this.props.sectionStyle],\n        onLayout: _this.onHeaderLayout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 7\n        }\n      }, sectionTitle);\n    };\n\n    _this.keyExtractor = function (item, index) {\n      return _lodash.default.isFunction(_this.props.keyExtractor) ? _this.props.keyExtractor(item, index) : String(index);\n    };\n\n    _this.style = (0, _style.default)(props.theme);\n    _this._topSection = _lodash.default.get(props, 'sections[0].title');\n    _this.didScroll = false;\n    _this.sectionScroll = false;\n    _this.viewabilityConfig = {\n      itemVisiblePercentThreshold: 20\n    };\n    _this.list = _react.default.createRef();\n    return _this;\n  }\n\n  (0, _createClass2.default)(AgendaList, [{\n    key: \"getSectionIndex\",\n    value: function getSectionIndex(date) {\n      var i;\n\n      _lodash.default.map(this.props.sections, function (section, index) {\n        if (section.title === date) {\n          i = index;\n          return;\n        }\n      });\n\n      return i;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var date = this.props.context.date;\n\n      if (date !== this._topSection) {\n        setTimeout(function () {\n          var sectionIndex = _this2.getSectionIndex(date);\n\n          _this2.scrollToSection(sectionIndex);\n        }, 500);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props$context = this.props.context,\n          updateSource = _this$props$context.updateSource,\n          date = _this$props$context.date;\n\n      if (date !== prevProps.context.date) {\n        if (updateSource !== UPDATE_SOURCES.LIST_DRAG && updateSource !== UPDATE_SOURCES.CALENDAR_INIT) {\n          var sectionIndex = this.getSectionIndex(date);\n          this.scrollToSection(sectionIndex);\n        }\n      }\n    }\n  }, {\n    key: \"scrollToSection\",\n    value: function scrollToSection(sectionIndex) {\n      if (this.list.current && sectionIndex !== undefined) {\n        this.sectionScroll = true;\n        this._topSection = this.props.sections[sectionIndex].title;\n        this.list.current.scrollToLocation({\n          animated: true,\n          sectionIndex: sectionIndex,\n          itemIndex: 0,\n          viewPosition: 0,\n          viewOffset: commons.isAndroid ? this.sectionHeight : 0\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(_reactNative.SectionList, (0, _extends2.default)({}, this.props, {\n        ref: this.list,\n        keyExtractor: this.keyExtractor,\n        showsVerticalScrollIndicator: false,\n        onViewableItemsChanged: this.onViewableItemsChanged,\n        viewabilityConfig: this.viewabilityConfig,\n        renderSectionHeader: this.renderSectionHeader,\n        onScroll: this.onScroll,\n        onMomentumScrollBegin: this.onMomentumScrollBegin,\n        onMomentumScrollEnd: this.onMomentumScrollEnd,\n        onScrollToIndexFailed: function onScrollToIndexFailed(info) {\n          console.warn('onScrollToIndexFailed info: ', info);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n  return AgendaList;\n}(_react.Component);\n\nAgendaList.displayName = 'AgendaList';\nAgendaList.propTypes = _objectSpread(_objectSpread({}, _reactNative.SectionList.propTypes), {}, {\n  dayFormat: _propTypes.default.string,\n  useMoment: _propTypes.default.bool,\n  sectionStyle: _propTypes.default.oneOfType([_propTypes.default.object, _propTypes.default.number, _propTypes.default.array])\n});\nAgendaList.defaultProps = {\n  dayFormat: 'dddd, MMM d',\n  stickySectionHeadersEnabled: true\n};\n\nvar _default = (0, _asCalendarConsumer.default)(AgendaList);\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/isaacweber/code/SofamApp/node_modules/react-native-calendars/src/expandableCalendar/agendaList.js"],"names":["commons","require","UPDATE_SOURCES","AgendaList","props","onViewableItemsChanged","viewableItems","sectionScroll","topSection","_","get","_topSection","didScroll","invoke","context","LIST_DRAG","onScroll","event","onMomentumScrollBegin","onMomentumScrollEnd","onHeaderLayout","nativeEvent","sectionHeight","layout","height","renderSectionHeader","title","section","sectionTitle","dayFormat","date","today","useMoment","format","toString","todayString","XDate","locales","defaultLocale","style","sectionText","sectionStyle","keyExtractor","item","index","isFunction","String","theme","viewabilityConfig","itemVisiblePercentThreshold","list","React","createRef","i","map","sections","setTimeout","sectionIndex","getSectionIndex","scrollToSection","prevProps","updateSource","CALENDAR_INIT","current","undefined","scrollToLocation","animated","itemIndex","viewPosition","viewOffset","isAndroid","info","console","warn","Component","displayName","propTypes","SectionList","PropTypes","string","bool","oneOfType","object","number","array","defaultProps","stickySectionHeadersEnabled"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {SectionList, Text} from 'react-native';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport moment from 'moment';\nimport styleConstructor from './style';\nimport asCalendarConsumer from './asCalendarConsumer';\n\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\n\n/**\n * @description: AgendaList component\n * @extends: SectionList\n * @notes: Should be wrapped in CalendarProvider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass AgendaList extends Component {\n  static displayName = 'AgendaList';\n\n  static propTypes = {\n    ...SectionList.propTypes,\n    /** day format in section title. Formatting values: http://arshaw.com/xdate/#Formatting */\n    dayFormat: PropTypes.string,\n    /** whether to use moment.js for date string formatting \n     * (remember to pass 'dayFormat' with appropriate format, like 'dddd, MMM D') */\n    useMoment: PropTypes.bool,\n    /** style passed to the section view */\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array])\n  }\n\n  static defaultProps = {\n    dayFormat: 'dddd, MMM d',\n    stickySectionHeadersEnabled: true\n  }\n\n  constructor(props) {\n    super(props);\n    this.style = styleConstructor(props.theme);\n\n    this._topSection = _.get(props, 'sections[0].title');\n    this.didScroll = false;\n    this.sectionScroll = false;\n\n    this.viewabilityConfig = {\n      itemVisiblePercentThreshold: 20 // 50 means if 50% of the item is visible\n    };\n    this.list = React.createRef();\n  }\n\n  getSectionIndex(date) {\n    let i;\n    _.map(this.props.sections, (section, index) => {\n      // NOTE: sections titles should match current date format!!!\n      if (section.title === date) {\n        i = index;\n        return;\n      }\n    });\n    return i;\n  }\n\n  componentDidMount() {\n    const {date} = this.props.context;\n    if (date !== this._topSection) {\n      setTimeout(() => {\n        const sectionIndex = this.getSectionIndex(date);\n        this.scrollToSection(sectionIndex);\n      }, 500);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {updateSource, date} = this.props.context;\n    if (date !== prevProps.context.date) {\n      // NOTE: on first init data should set first section to the current date!!!\n      if (updateSource !== UPDATE_SOURCES.LIST_DRAG && updateSource !== UPDATE_SOURCES.CALENDAR_INIT) {\n        const sectionIndex = this.getSectionIndex(date);\n        this.scrollToSection(sectionIndex);\n      }\n    }\n  }\n\n  scrollToSection(sectionIndex) {\n    if (this.list.current && sectionIndex !== undefined) {\n      this.sectionScroll = true; // to avoid setDate() in onViewableItemsChanged\n      this._topSection = this.props.sections[sectionIndex].title;\n\n      this.list.current.scrollToLocation({\n        animated: true,\n        sectionIndex: sectionIndex,\n        itemIndex: 0,\n        viewPosition: 0, // position at the top\n        viewOffset: commons.isAndroid ? this.sectionHeight : 0\n      });\n    }\n  }\n\n  onViewableItemsChanged = ({viewableItems}) => {\n    if (viewableItems && !this.sectionScroll) {\n      const topSection = _.get(viewableItems[0], 'section.title');\n      if (topSection && topSection !== this._topSection) {\n        this._topSection = topSection;\n        if (this.didScroll) { // to avoid setDate() on first load (while setting the initial context.date value)\n          _.invoke(this.props.context, 'setDate', this._topSection, UPDATE_SOURCES.LIST_DRAG);\n        }\n      }\n    }\n  }\n\n  onScroll = (event) => {\n    if (!this.didScroll) {\n      this.didScroll = true;\n    }\n    _.invoke(this.props, 'onScroll', event);\n  }\n\n  onMomentumScrollBegin = (event) => {\n    _.invoke(this.props.context, 'setDisabled', true);\n    _.invoke(this.props, 'onMomentumScrollBegin', event);\n  }\n\n  onMomentumScrollEnd = (event) => {\n    // when list momentum ends AND when scrollToSection scroll ends\n    this.sectionScroll = false;\n    _.invoke(this.props.context, 'setDisabled', false);\n    _.invoke(this.props, 'onMomentumScrollEnd', event);\n  }\n\n  onHeaderLayout = ({nativeEvent}) => {\n    this.sectionHeight = nativeEvent.layout.height;\n  }\n\n  renderSectionHeader = ({section: {title}}) => {\n    let sectionTitle = title;\n\n    if (this.props.dayFormat) {\n      let date;\n      let today;\n\n      if (this.props.useMoment) {\n        date = moment(title).format(this.props.dayFormat);\n        today = moment().format(this.props.dayFormat);\n      } else {\n        date = XDate(title).toString(this.props.dayFormat);\n        today = XDate().toString(this.props.dayFormat);\n      }\n\n      const todayString = XDate.locales[XDate.defaultLocale].today || commons.todayString;\n      sectionTitle = date === today ? `${todayString}, ${date}` : date;\n    }\n\n    return (\n      <Text allowFontScaling={false} style={[this.style.sectionText, this.props.sectionStyle]} onLayout={this.onHeaderLayout}>{sectionTitle}</Text>\n    );\n  }\n\n  keyExtractor = (item, index) => {\n    return _.isFunction(this.props.keyExtractor) ? this.props.keyExtractor(item, index) : String(index);\n  }\n\n  render() {\n    return (\n      <SectionList\n        {...this.props}\n        ref={this.list}\n        keyExtractor={this.keyExtractor}\n        showsVerticalScrollIndicator={false}\n        onViewableItemsChanged={this.onViewableItemsChanged}\n        viewabilityConfig={this.viewabilityConfig}\n        renderSectionHeader={this.renderSectionHeader}\n        onScroll={this.onScroll}\n        onMomentumScrollBegin={this.onMomentumScrollBegin}\n        onMomentumScrollEnd={this.onMomentumScrollEnd}\n        onScrollToIndexFailed={(info) => { console.warn('onScrollToIndexFailed info: ', info); }}\n        // getItemLayout={this.getItemLayout} // onViewableItemsChanged is not updated when list scrolls!!!\n      />\n    );\n  }\n\n  // getItemLayout = (data, index) => {\n  //   return {length: commons.screenWidth, offset: commons.screenWidth  * index, index};\n  // }\n}\n\nexport default asCalendarConsumer(AgendaList);\n"]},"metadata":{},"sourceType":"script"}