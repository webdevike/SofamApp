{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DemoScreen = exports.heart = exports.logoIgnite = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _taggedTemplateLiteralLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar ImagePicker = _interopRequireWildcard(require(\"expo-image-picker\"));\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _mobxReactLite = require(\"mobx-react-lite\");\n\nvar _components = require(\"../../components\");\n\nvar _theme = require(\"../../theme\");\n\nvar _client = require(\"@apollo/client\");\n\nvar _apolloUploadClient = require(\"apollo-upload-client\");\n\nvar _jsxFileName = \"/Users/isaacweber/code/SofamApp/app/screens/demo-screen/demo-screen.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject2() {\n  var data = (0, _taggedTemplateLiteralLoose2.default)([\"\\nmutation uploadFile($file: Upload!) {\\n  uploadFile(file: $file) {\\n    filename\\n    mimetype\\n    encoding\\n    signedRequest\\n    url\\n  }\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteralLoose2.default)([\"\\n  mutation createStory($name: String!, $type: String!, $uri: String!) {\\n    createStory(name: $name, type: $type, uri: $uri) {\\n      id\\n      createdAt\\n      file {\\n        name\\n        type\\n        uri\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar logoIgnite = require(\"./logo-ignite.png\");\n\nexports.logoIgnite = logoIgnite;\n\nvar heart = require(\"./heart.png\");\n\nexports.heart = heart;\nvar CREATE_STORY = (0, _client.gql)(_templateObject());\nvar UPLOAD_FILE = (0, _client.gql)(_templateObject2());\nvar FULL = {\n  flex: 1\n};\nvar CONTAINER = {\n  backgroundColor: _theme.color.transparent,\n  paddingHorizontal: _theme.spacing[4]\n};\nvar DEMO = {\n  paddingVertical: _theme.spacing[4],\n  paddingHorizontal: _theme.spacing[4],\n  backgroundColor: \"#5D2555\"\n};\nvar BOLD = {\n  fontWeight: \"bold\"\n};\n\nvar DEMO_TEXT = _objectSpread(_objectSpread({}, BOLD), {}, {\n  fontSize: 13,\n  letterSpacing: 2\n});\n\nvar HEADER = {\n  paddingTop: _theme.spacing[3],\n  paddingBottom: _theme.spacing[5] - 1,\n  paddingHorizontal: 0\n};\n\nvar HEADER_TITLE = _objectSpread(_objectSpread({}, BOLD), {}, {\n  fontSize: 12,\n  lineHeight: 15,\n  textAlign: \"center\",\n  letterSpacing: 1.5\n});\n\nvar TITLE = _objectSpread(_objectSpread({}, BOLD), {}, {\n  fontSize: 28,\n  lineHeight: 38,\n  textAlign: \"center\",\n  marginBottom: _theme.spacing[5]\n});\n\nvar TAGLINE = {\n  color: \"#BAB6C8\",\n  fontSize: 15,\n  lineHeight: 22,\n  marginBottom: _theme.spacing[4] + _theme.spacing[1]\n};\nvar IGNITE = {\n  marginVertical: _theme.spacing[6],\n  alignSelf: \"center\"\n};\nvar LOVE_WRAPPER = {\n  flexDirection: \"row\",\n  alignItems: \"center\",\n  alignSelf: \"center\"\n};\nvar LOVE = {\n  color: \"#BAB6C8\",\n  fontSize: 15,\n  lineHeight: 22\n};\nvar HEART = {\n  marginHorizontal: _theme.spacing[2],\n  width: 10,\n  height: 10,\n  resizeMode: \"contain\"\n};\nvar HINT = {\n  color: \"#BAB6C8\",\n  fontSize: 12,\n  lineHeight: 15,\n  marginVertical: _theme.spacing[2]\n};\nvar DemoScreen = (0, _mobxReactLite.observer)(function DemoScreen() {\n  var navigation = (0, _native.useNavigation)();\n\n  var goBack = function goBack() {\n    return navigation.goBack();\n  };\n\n  var _useMutation = (0, _client.useMutation)(CREATE_STORY),\n      _useMutation2 = (0, _slicedToArray2.default)(_useMutation, 1),\n      createStory = _useMutation2[0];\n\n  var _useMutation3 = (0, _client.useMutation)(UPLOAD_FILE),\n      _useMutation4 = (0, _slicedToArray2.default)(_useMutation3, 1),\n      uploadFile = _useMutation4[0];\n\n  function uploadImage(file, signedRequest, url) {\n    fetch(signedRequest, {\n      method: \"PUT\",\n      body: file,\n      headers: {\n        'Content-type': \"image/jpeg\"\n      }\n    }).then(function (res) {\n      console.log(res, url);\n    }).catch(function (e) {\n      console.log(e);\n    });\n  }\n\n  var _pickImage = function _pickImage() {\n    var permissionResult, result, filename, file, _await$uploadFile, data;\n\n    return _regenerator.default.async(function _pickImage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regenerator.default.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n          case 3:\n            permissionResult = _context.sent;\n\n            if (!(permissionResult.granted === false)) {\n              _context.next = 7;\n              break;\n            }\n\n            alert(\"Permission to access camera roll is required!\");\n            return _context.abrupt(\"return\");\n\n          case 7:\n            _context.next = 9;\n            return _regenerator.default.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 9:\n            result = _context.sent;\n            filename = result.uri.split('/').pop();\n            file = new _apolloUploadClient.ReactNativeFile({\n              uri: result.uri,\n              name: filename,\n              type: result.type\n            });\n            _context.next = 14;\n            return _regenerator.default.awrap(uploadFile({\n              variables: {\n                file: file\n              }\n            }));\n\n          case 14:\n            _await$uploadFile = _context.sent;\n            data = _await$uploadFile.data;\n            uploadImage(file, data.uploadFile.signedRequest, data.uploadFile.url);\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.prev = 19;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0, 'error is here!');\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 19]], Promise);\n  };\n\n  return _react.default.createElement(_reactNative.View, {\n    style: FULL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_components.Wallpaper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), _react.default.createElement(_components.Screen, {\n    style: CONTAINER,\n    preset: \"scroll\",\n    backgroundColor: _theme.color.transparent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_components.Header, {\n    headerTx: \"demoScreen.howTo\",\n    leftIcon: \"back\",\n    onLeftPress: goBack,\n    style: HEADER,\n    titleStyle: HEADER_TITLE,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_components.Text, {\n    style: TITLE,\n    preset: \"header\",\n    tx: \"demoScreen.title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_components.Text, {\n    style: TAGLINE,\n    tx: \"demoScreen.tagLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_components.BulletItem, {\n    text: \"Load up Reactotron!  You can inspect your app, view the events, interact, and so much more!\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_components.BulletItem, {\n    text: \"Integrated here, Navigation with State, TypeScript, Storybook, Solidarity, and i18n.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_components.Button, {\n    style: DEMO,\n    textStyle: DEMO_TEXT,\n    tx: \"demoScreen.reactotron\",\n    onPress: _pickImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_components.Text, {\n    style: HINT,\n    tx: \"demoScreen.\" + _reactNative.Platform.OS + \"ReactotronHint\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  })), _react.default.createElement(_reactNative.Image, {\n    source: logoIgnite,\n    style: IGNITE,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.View, {\n    style: LOVE_WRAPPER,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_components.Text, {\n    style: LOVE,\n    text: \"Made with\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_reactNative.Image, {\n    source: heart,\n    style: HEART,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_components.Text, {\n    style: LOVE,\n    text: \"by Infinite Red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }))));\n});\nexports.DemoScreen = DemoScreen;","map":{"version":3,"sources":["/Users/isaacweber/code/SofamApp/app/screens/demo-screen/demo-screen.tsx"],"names":["logoIgnite","require","heart","CREATE_STORY","gql","UPLOAD_FILE","FULL","flex","CONTAINER","backgroundColor","color","transparent","paddingHorizontal","spacing","DEMO","paddingVertical","BOLD","fontWeight","DEMO_TEXT","fontSize","letterSpacing","HEADER","paddingTop","paddingBottom","HEADER_TITLE","lineHeight","textAlign","TITLE","marginBottom","TAGLINE","IGNITE","marginVertical","alignSelf","LOVE_WRAPPER","flexDirection","alignItems","LOVE","HEART","marginHorizontal","width","height","resizeMode","HINT","DemoScreen","navigation","goBack","createStory","uploadFile","uploadImage","file","signedRequest","url","fetch","method","body","headers","then","res","console","log","catch","e","_pickImage","ImagePicker","requestCameraRollPermissionsAsync","permissionResult","granted","alert","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","filename","uri","split","pop","ReactNativeFile","name","type","variables","data","Platform","OS"],"mappings":"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","sourcesContent":["import React, { FunctionComponent as Component } from \"react\"\nimport { Image, ImageStyle, Platform, TextStyle, View, ViewStyle } from \"react-native\"\nimport * as ImagePicker from 'expo-image-picker'\nimport { useNavigation } from \"@react-navigation/native\"\n\nimport { observer } from \"mobx-react-lite\"\nimport { BulletItem, Button, Header, Text, Screen, Wallpaper } from \"../../components\"\nimport { color, spacing } from \"../../theme\"\n// import CREATE_STORY from '../../graphql/story/mutation/createStory.js'\nimport { useMutation, gql } from \"@apollo/client\"\nimport { ReactNativeFile } from 'apollo-upload-client'\nexport const logoIgnite = require(\"./logo-ignite.png\")\nexport const heart = require(\"./heart.png\")\nconst CREATE_STORY = gql`\n  mutation createStory($name: String!, $type: String!, $uri: String!) {\n    createStory(name: $name, type: $type, uri: $uri) {\n      id\n      createdAt\n      file {\n        name\n        type\n        uri\n      }\n    }\n  }\n`\n\nconst UPLOAD_FILE = gql`\nmutation uploadFile($file: Upload!) {\n  uploadFile(file: $file) {\n    filename\n    mimetype\n    encoding\n    signedRequest\n    url\n  }\n}\n`\nconst FULL: ViewStyle = { flex: 1 }\nconst CONTAINER: ViewStyle = {\n  backgroundColor: color.transparent,\n  paddingHorizontal: spacing[4],\n}\nconst DEMO: ViewStyle = {\n  paddingVertical: spacing[4],\n  paddingHorizontal: spacing[4],\n  backgroundColor: \"#5D2555\",\n}\nconst BOLD: TextStyle = { fontWeight: \"bold\" }\nconst DEMO_TEXT: TextStyle = {\n  ...BOLD,\n  fontSize: 13,\n  letterSpacing: 2,\n}\nconst HEADER: TextStyle = {\n  paddingTop: spacing[3],\n  paddingBottom: spacing[5] - 1,\n  paddingHorizontal: 0,\n}\nconst HEADER_TITLE: TextStyle = {\n  ...BOLD,\n  fontSize: 12,\n  lineHeight: 15,\n  textAlign: \"center\",\n  letterSpacing: 1.5,\n}\nconst TITLE: TextStyle = {\n  ...BOLD,\n  fontSize: 28,\n  lineHeight: 38,\n  textAlign: \"center\",\n  marginBottom: spacing[5],\n}\nconst TAGLINE: TextStyle = {\n  color: \"#BAB6C8\",\n  fontSize: 15,\n  lineHeight: 22,\n  marginBottom: spacing[4] + spacing[1],\n}\nconst IGNITE: ImageStyle = {\n  marginVertical: spacing[6],\n  alignSelf: \"center\",\n}\nconst LOVE_WRAPPER: ViewStyle = {\n  flexDirection: \"row\",\n  alignItems: \"center\",\n  alignSelf: \"center\",\n}\nconst LOVE: TextStyle = {\n  color: \"#BAB6C8\",\n  fontSize: 15,\n  lineHeight: 22,\n}\nconst HEART: ImageStyle = {\n  marginHorizontal: spacing[2],\n  width: 10,\n  height: 10,\n  resizeMode: \"contain\",\n}\nconst HINT: TextStyle = {\n  color: \"#BAB6C8\",\n  fontSize: 12,\n  lineHeight: 15,\n  marginVertical: spacing[2],\n}\n\nexport const DemoScreen: Component = observer(function DemoScreen() {\n  const navigation = useNavigation()\n  const goBack = () => navigation.goBack()\n  const [createStory] = useMutation(CREATE_STORY)\n  const [uploadFile] = useMutation(UPLOAD_FILE)\n\n  function uploadImage(file, signedRequest, url) {\n    fetch(signedRequest, {\n      method: \"PUT\",\n      body: file,\n      headers: {\n        'Content-type': \"image/jpeg\"\n      }\n    }).then((res) => {\n      console.log(res, url)\n    }).catch((e) => {\n      console.log(e)\n    })\n  }\n\n  const _pickImage = async () => {\n    try {\n      const permissionResult = await ImagePicker.requestCameraRollPermissionsAsync()\n\n      if (permissionResult.granted === false) {\n        alert(\"Permission to access camera roll is required!\")\n        return\n      }\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1,\n      })\n\n      const filename = result.uri.split('/').pop()\n\n      const file = new ReactNativeFile({\n        uri: result.uri,\n        name: filename,\n        type: result.type\n      })\n\n      const { data } = await uploadFile({\n        variables: {\n          file\n        }\n      })\n\n      uploadImage(file, data.uploadFile.signedRequest, data.uploadFile.url)\n    } catch (E) {\n      console.log(E, 'error is here!')\n    }\n  }\n\n  return (\n    <View style={FULL}>\n      <Wallpaper />\n      <Screen style={CONTAINER} preset=\"scroll\" backgroundColor={color.transparent}>\n        <Header\n          headerTx=\"demoScreen.howTo\"\n          leftIcon=\"back\"\n          onLeftPress={goBack}\n          style={HEADER}\n          titleStyle={HEADER_TITLE}\n        />\n        <Text style={TITLE} preset=\"header\" tx=\"demoScreen.title\" />\n        <Text style={TAGLINE} tx=\"demoScreen.tagLine\" />\n        <BulletItem text=\"Load up Reactotron!  You can inspect your app, view the events, interact, and so much more!\" />\n        <BulletItem text=\"Integrated here, Navigation with State, TypeScript, Storybook, Solidarity, and i18n.\" />\n        <View>\n          <Button\n            style={DEMO}\n            textStyle={DEMO_TEXT}\n            tx=\"demoScreen.reactotron\"\n            onPress={_pickImage}\n          />\n          <Text style={HINT} tx={`demoScreen.${Platform.OS}ReactotronHint`} />\n        </View>\n        <Image source={logoIgnite} style={IGNITE} />\n        <View style={LOVE_WRAPPER}>\n          <Text style={LOVE} text=\"Made with\" />\n          <Image source={heart} style={HEART} />\n          <Text style={LOVE} text=\"by Infinite Red\" />\n        </View>\n      </Screen>\n    </View>\n  )\n})\n"]},"metadata":{},"sourceType":"script"}