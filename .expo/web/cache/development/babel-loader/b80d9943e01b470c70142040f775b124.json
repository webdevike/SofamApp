{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Packer = _interopRequireDefault(require(\"./Packer\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _style = _interopRequireDefault(require(\"./style\"));\n\nvar _jsxFileName = \"/Users/isaacweber/code/SofamApp/node_modules/react-native-calendars/src/timeline/Timeline.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar LEFT_MARGIN = 60 - 1;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar _Dimensions$get = _reactNative.Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function (_React$PureComponent) {\n  (0, _inherits2.default)(Timeline, _React$PureComponent);\n\n  var _super = _createSuper(Timeline);\n\n  function Timeline(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Timeline);\n    _this = _super.call(this, props);\n    var _this$props = _this.props,\n        start = _this$props.start,\n        end = _this$props.end;\n    _this.calendarHeight = (end - start) * 100;\n    _this.styles = (0, _style.default)(props.styles, _this.calendarHeight);\n    var width = dimensionWidth - LEFT_MARGIN;\n    var packedEvents = (0, _Packer.default)(props.events, width, start);\n    var initPosition = _lodash.default.min(_lodash.default.map(packedEvents, 'top')) - _this.calendarHeight / (end - start);\n    var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var width = dimensionWidth - LEFT_MARGIN;\n      var prevEvents = prevProps.events,\n          _prevProps$start = prevProps.start,\n          prevStart = _prevProps$start === void 0 ? 0 : _prevProps$start;\n      var _this$props2 = this.props,\n          events = _this$props2.events,\n          _this$props2$start = _this$props2.start,\n          start = _this$props2$start === void 0 ? 0 : _this$props2$start;\n\n      if (prevEvents !== events || prevStart !== start) {\n        this.setState({\n          packedEvents: (0, _Packer.default)(events, width, start)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2._scrollView) {\n          _this2._scrollView.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          format24h = _this$props3.format24h,\n          _this$props3$start = _this$props3.start,\n          start = _this$props3$start === void 0 ? 0 : _this$props3$start,\n          _this$props3$end = _this$props3.end,\n          end = _this$props3$end === void 0 ? 24 : _this$props3$end;\n      var offset = this.calendarHeight / (end - start);\n      var EVENT_DIFF = 20;\n      return range(start, end + 1).map(function (i, index) {\n        var timeText;\n\n        if (i === start) {\n          timeText = '';\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i + \":00\";\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i + \":00\";\n        } else if (i === 24) {\n          timeText = !format24h ? '12 AM' : '23:59';\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i + \":00\";\n        }\n\n        return [_react.default.createElement(_reactNative.Text, {\n          key: \"timeLabel\" + i,\n          style: [_this3.styles.timeLabel, {\n            top: offset * index - 6\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 9\n          }\n        }, timeText), i === start ? null : _react.default.createElement(_reactNative.View, {\n          key: \"line\" + i,\n          style: [_this3.styles.line, {\n            top: offset * index,\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }\n        }), _react.default.createElement(_reactNative.View, {\n          key: \"lineHalf\" + i,\n          style: [_this3.styles.line, {\n            top: offset * (index + 0.5),\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 9\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_onEventTapped\",\n    value: function _onEventTapped(event) {\n      if (this.props.eventTapped) {\n        this.props.eventTapped(event);\n      }\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this4 = this;\n\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top,\n          backgroundColor: event.color ? event.color : '#add8e6'\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this4.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return _react.default.createElement(_reactNative.TouchableOpacity, {\n          activeOpacity: 0.9,\n          onPress: function onPress() {\n            return _this4._onEventTapped(_this4.props.events[event.index]);\n          },\n          key: i,\n          style: [_this4.styles.event, style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 9\n          }\n        }, _this4.props.renderEvent ? _this4.props.renderEvent(event) : _react.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }\n        }, _react.default.createElement(_reactNative.Text, {\n          numberOfLines: 1,\n          style: _this4.styles.eventTitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? _react.default.createElement(_reactNative.Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [_this4.styles.eventSummary],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 17\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? _react.default.createElement(_reactNative.Text, {\n          style: _this4.styles.eventTimes,\n          numberOfLines: 1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }\n        }, (0, _moment.default)(event.start).format(formatTime), \" -\", ' ', (0, _moment.default)(event.end).format(formatTime)) : null));\n      });\n      return _react.default.createElement(_reactNative.View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return _react.default.createElement(_reactNative.ScrollView, {\n        ref: function ref(_ref) {\n          return _this5._scrollView = _ref;\n        },\n        contentContainerStyle: [this.styles.contentStyle, {\n          width: dimensionWidth\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 7\n        }\n      }, this._renderLines(), this._renderEvents());\n    }\n  }]);\n  return Timeline;\n}(_react.default.PureComponent);\n\nexports.default = Timeline;\nTimeline.propTypes = {\n  start: _propTypes.default.number,\n  end: _propTypes.default.number,\n  eventTapped: _propTypes.default.func,\n  format24h: _propTypes.default.bool,\n  events: _propTypes.default.arrayOf(_propTypes.default.shape({\n    start: _propTypes.default.string.isRequired,\n    end: _propTypes.default.string.isRequired,\n    title: _propTypes.default.string.isRequired,\n    summary: _propTypes.default.string.isRequired,\n    color: _propTypes.default.string\n  })).isRequired\n};\nTimeline.defaultProps = {\n  start: 0,\n  end: 24,\n  events: [],\n  format24h: true\n};","map":{"version":3,"sources":["/Users/isaacweber/code/SofamApp/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["LEFT_MARGIN","TEXT_LINE_HEIGHT","range","from","to","Array","_","i","Dimensions","get","dimensionWidth","width","Timeline","props","start","end","calendarHeight","styles","packedEvents","events","initPosition","min","map","verifiedInitPosition","state","_scrollY","prevProps","prevEvents","prevStart","setState","scrollToFirst","setTimeout","_scrollView","scrollTo","x","y","animated","format24h","offset","EVENT_DIFF","index","timeText","timeLabel","top","line","event","eventTapped","style","left","height","backgroundColor","color","numberOfLines","Math","floor","formatTime","_onEventTapped","renderEvent","eventTitle","title","eventSummary","summary","eventTimes","format","marginLeft","ref","contentStyle","_renderLines","_renderEvents","React","PureComponent","propTypes","PropTypes","number","func","bool","arrayOf","shape","string","isRequired","defaultProps"],"mappings":"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","sourcesContent":["// @flow\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity,\n  Dimensions\n} from 'react-native';\nimport PropTypes from 'prop-types';\nimport populateEvents from './Packer';\nimport React from 'react';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport styleConstructor from './style';\n\nconst LEFT_MARGIN = 60 - 1;\nconst TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), (_, i) => from + i);\n}\n\nlet {width: dimensionWidth} = Dimensions.get('window');\n\nexport default class Timeline extends React.PureComponent {\n  static propTypes = {\n    start: PropTypes.number,\n    end: PropTypes.number,\n    eventTapped: PropTypes.func,\n    format24h: PropTypes.bool,\n    events: PropTypes.arrayOf(PropTypes.shape({\n      start: PropTypes.string.isRequired,\n      end: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      summary: PropTypes.string.isRequired,\n      color: PropTypes.string\n    })).isRequired\n  }\n\n  static defaultProps = {\n    start: 0,\n    end: 24,\n    events: [],\n    format24h: true\n  }\n\n  constructor(props) {\n    super(props);\n    const {start, end} = this.props;\n    this.calendarHeight = (end - start) * 100;\n    this.styles = styleConstructor(props.styles, this.calendarHeight);\n    const width = dimensionWidth - LEFT_MARGIN;\n    const packedEvents = populateEvents(props.events, width, start);\n    let initPosition =\n      _.min(_.map(packedEvents, 'top')) - this.calendarHeight / (end - start);\n    const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const width = dimensionWidth - LEFT_MARGIN;\n    const {events: prevEvents, start: prevStart = 0} = prevProps;\n    const {events, start = 0} = this.props;\n    if(prevEvents !== events || prevStart !== start) {\n      this.setState({\n        packedEvents: populateEvents(events, width, start)\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.props.scrollToFirst && this.scrollToFirst();\n  }\n\n  scrollToFirst() {\n    setTimeout(() => {\n      if (this.state && this.state._scrollY && this._scrollView) {\n        this._scrollView.scrollTo({\n          x: 0,\n          y: this.state._scrollY,\n          animated: true\n        });\n      }\n    }, 1);\n  }\n\n  _renderLines() {\n    const {format24h, start = 0, end = 24} = this.props;\n    const offset = this.calendarHeight / (end - start);\n\n    const EVENT_DIFF = 20;\n\n    return range(start, end + 1).map((i, index) => {\n      let timeText;\n      if (i === start) {\n        timeText = '';\n      } else if (i < 12) {\n        timeText = !format24h ? `${i} AM` : `${i}:00`;\n      } else if (i === 12) {\n        timeText = !format24h ? `${i} PM` : `${i}:00`;\n      } else if (i === 24) {\n        timeText = !format24h ? '12 AM' : '23:59';\n      } else {\n        timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n      }\n      return [\n        <Text\n          key={`timeLabel${i}`}\n          style={[this.styles.timeLabel, {top: offset * index - 6}]}>\n          {timeText}\n        </Text>,\n        i === start ? null : (\n          <View\n            key={`line${i}`}\n            style={[\n              this.styles.line,\n              {top: offset * index, width: dimensionWidth - EVENT_DIFF}\n            ]}\n          />\n        ),\n        <View\n          key={`lineHalf${i}`}\n          style={[\n            this.styles.line,\n            {top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF}\n          ]}\n        />\n      ];\n    });\n  }\n\n  _onEventTapped(event) {\n    if(this.props.eventTapped) {\n      this.props.eventTapped(event);\n    }\n  }\n\n  _renderEvents() {\n    const {packedEvents} = this.state;\n    let events = packedEvents.map((event, i) => {\n      const style = {\n        left: event.left,\n        height: event.height,\n        width: event.width,\n        top: event.top,\n        backgroundColor: event.color ? event.color : '#add8e6'\n      };\n\n      // Fixing the number of lines for the event title makes this calculation easier.\n      // However it would make sense to overflow the title to a new line if needed\n      const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n      const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A';\n      return (\n        <TouchableOpacity\n          activeOpacity={0.9}\n          onPress={() => this._onEventTapped(this.props.events[event.index])}\n          key={i}\n          style={[this.styles.event, style]}>\n          {this.props.renderEvent ? (\n            this.props.renderEvent(event)\n          ) : (\n            <View>\n              <Text numberOfLines={1} style={this.styles.eventTitle}>\n                {event.title || 'Event'}\n              </Text>\n              {numberOfLines > 1 ? (\n                <Text\n                  numberOfLines={numberOfLines - 1}\n                  style={[this.styles.eventSummary]}>\n                  {event.summary || ' '}\n                </Text>\n              ) : null}\n              {numberOfLines > 2 ? (\n                <Text style={this.styles.eventTimes} numberOfLines={1}>\n                  {moment(event.start).format(formatTime)} -{' '}\n                  {moment(event.end).format(formatTime)}\n                </Text>\n              ) : null}\n            </View>\n          )}\n        </TouchableOpacity>\n      );\n    });\n\n    return (\n      <View>\n        <View style={{marginLeft: LEFT_MARGIN}}>{events}</View>\n      </View>\n    );\n  }\n\n  render() {\n    return (\n      <ScrollView\n        ref={ref => (this._scrollView = ref)}\n        contentContainerStyle={[\n          this.styles.contentStyle,\n          {width: dimensionWidth}\n        ]}>\n        {this._renderLines()}\n        {this._renderEvents()}\n      </ScrollView>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}